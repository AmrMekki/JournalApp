<!DOCTYPE html>
<html lang="en" id="htmlRoot" class="">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - JournalApp</title>
    <link href="~/dist/output.css" rel="stylesheet" /> <!-- Tailwind CSS -->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/JournalApp.styles.css" asp-append-version="true" />
</head>

<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen transition-colors duration-300">
    <header class="bg-white dark:bg-gray-800 shadow transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <a href="/" class="text-2xl font-bold text-gray-800 dark:text-white">JournalApp</a>
            <nav class="space-x-6">
                <a href="/" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">🏠 Home</a>
                <a href="/Journal/Create" class="text-gray-700 dark:text-gray-300 hover:text-blue-500">📝 Create</a>
                <button id="darkToggle"
                    class="ml-4 px-3 py-1 border rounded text-sm text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 transition">
                    <span id="toggleText">🌙 Dark Mode</span>
                </button>


            </nav>
        </div>
    </header>

    <div class="container mx-auto px-4">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-t border-gray-200 dark:border-gray-700 footer text-muted transition-colors duration-300">
        <div class="container mx-auto px-4 py-4 text-gray-600 dark:text-gray-400">
            &copy; 2025 - JournalApp - <a asp-area="" asp-controller="Home" asp-action="Privacy"
                class="hover:text-blue-500 dark:hover:text-blue-400">Privacy</a>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>
    <partial name="_ValidationScriptsPartial" />
   <script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggle = document.getElementById('darkToggle');
    const toggleText = document.getElementById('toggleText');
    const htmlRoot = document.getElementById('htmlRoot');

    if (!toggle || !toggleText || !htmlRoot) return;

    // Initial load: check localStorage
    if (localStorage.getItem('theme') === 'dark') {
      htmlRoot.classList.add('dark');
      toggleText.textContent = '☀️ Light Mode';
    }

    toggle.addEventListener('click', () => {
      const isDark = htmlRoot.classList.toggle('dark');
      if (isDark) {
        localStorage.setItem('theme', 'dark');
        toggleText.textContent = '☀️ Light Mode';
      } else {
        localStorage.setItem('theme', 'light');
        toggleText.textContent = '🌙 Dark Mode';
      }
    });
  });
</script>
<script>
    // Character Count for Content
    const contentInput = document.getElementById('ContentInput');
    const charCount = document.getElementById('charCount');
    contentInput?.addEventListener('input', () => {
        charCount.textContent = contentInput.value.length;
    });

    // Emoji Picker
    document.getElementById('emojiBtn')?.addEventListener('click', () => {
        const emojis = ['😀', '😅', '😊', '😢', '😡', '😴', '🥳', '😎', '😍'];
        const picker = document.createElement('div');
        picker.className = 'absolute bg-white dark:bg-gray-800 border p-2 rounded shadow flex gap-1 flex-wrap z-50';
        emojis.forEach(e => {
            const btn = document.createElement('button');
            btn.textContent = e;
            btn.className = 'text-2xl hover:scale-125 transition';
            btn.onclick = () => {
                document.getElementById('MoodInput').value = e;
                picker.remove();
            };
            picker.appendChild(btn);
        });
        document.getElementById('emojiBtn').after(picker);
    });

    // Tag Preview
    const tagInput = document.getElementById('TagsInput');
    const tagPreview = document.getElementById('tagPreview');
    tagInput?.addEventListener('input', () => {
        const tags = tagInput.value.split(',').map(t => t.trim()).filter(Boolean);
        tagPreview.innerHTML = '';
        tags.forEach(tag => {
            const span = document.createElement('span');
            span.className = 'bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm';
            span.textContent = `#${tag}`;
            tagPreview.appendChild(span);
        });
    });
</script>

    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
