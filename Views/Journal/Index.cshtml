@model List<JournalApp.Models.JournalEntry>
@{
    ViewData["Title"] = "My Journal";
}

@if (TempData["Message"] != null)
{
    <div class="p-4 mb-4 text-green-800 bg-green-100 border border-green-300 rounded-lg dark:bg-green-900 dark:text-green-200 dark:border-green-700">
        @TempData["Message"]
    </div>
}

<h1 class="text-4xl font-bold mb-6 text-gray-900 dark:text-white">
    📓 My Journal
</h1>

<div class="p-4 mb-6 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow">
    This is a dark mode test block.
</div>

<form method="get" asp-action="Index" class="flex flex-col sm:flex-row items-center gap-2 sm:gap-4 mb-6">
    <input 
        type="text" 
        name="search" 
        placeholder="Search entries..." 
        value="@Context.Request.Query["search"]"
        class="w-full sm:w-64 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"
    />
    <button 
        type="submit"
        class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow"
    >
        🔍 Search
    </button>
</form>

<a href="/Journal/Create" class="inline-block mb-6 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
    + New Entry
</a>

@if (ViewBag.Quote != null)
{
    <div class="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 p-4 rounded-lg shadow mb-6">
        <blockquote>@ViewBag.Quote</blockquote>
    </div>
}

@foreach (var entry in Model)
{
    <div class="bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-6 mb-4 rounded-lg shadow-md">
        <h2 class="text-2xl font-semibold mb-1">@entry.Title <span class="ml-2">@entry.Mood</span></h2>
        <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">@entry.Date.ToString("f")</p>
        <p class="mb-4">@entry.Content</p>
        <div class="flex gap-3">
            <a asp-action="Edit" asp-route-id="@entry.Id" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600 transition">Edit</a>
            <a asp-action="Delete" asp-route-id="@entry.Id" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition">Delete</a>
        </div>
    </div>
}
